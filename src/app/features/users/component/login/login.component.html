<div class="container-fluid p-0">
  <div class="row g-0 h-100">
    <div class="col-xl-9 h-100 d-none d-xl-block">
      <div class="auth-full-bg">
        <div class="w-100 h-100">
          <video autoplay muted loop playsinline class="login-video-bg">
            <source src="/assets/videos/login-bg.mp4" type="video/mp4"/>
          </video>
          <div class="bg-overlay"></div>
          <div class="d-flex h-100 flex-column">
            <div class="p-4">
              <div class="row justify-content-center">
                <div class="col-lg-7">
                  <div class="text-center">
                    <h4 class="mb-3 text-white">
                      <i class="bx bxs-quote-alt-left text-white h1 align-middle me-3"></i>
                      <span class="text-light">Multiflex</span> ERP
                    </h4>

                    <div dir="ltr">
                      <app-edu-messages [scrollSpeed]="30"></app-edu-messages>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- end col -->

    <div class="col-xl-3 h-100">
      <div class="auth-full-page-content h-100">
        <div class="login-container w-100">
          <!-- Logo section - 40% -->
          <div class="logo-section d-md-flex">
            <!-- Vidéo uniquement visible et chargée sur mobile -->
            <div class="d-md-none">
              <video autoplay muted loop playsinline class="login-logo-video">
                <source src="assets/videos/login-bg-mobile.mp4" type="video/mp4"/>
              </video>
            </div>
            <div class="logo-overlay"></div>
            <div class="logo-wrapper">
              <a routerLink="/" class="d-block auth-logo">
                <img
                  ngSrc="assets/images/logo-web-light.png"
                  alt=""
                  priority
                  height="162"
                  width="283"
                  class="auth-logo-dark"
                />
              </a>
            </div>
          </div>

          <!-- Form section - 60% -->
          <div class="form-section">
            <div class="form-wrapper">
              <div>
                <h5 class="text-primary">Bienvenue !</h5>
                <p class="text-muted">Connectez-vous pour accéder à Multiflex ERP.</p>
              </div>

              <div class="mt-4">
                <form [formGroup]="form()" (ngSubmit)="onSubmit()">
                  <app-dynamic-form [fields]="fields()" [form]="form()"></app-dynamic-form>
                  <div class="mt-4 d-grid">
                    <button class="btn login-btn" type="submit" [disabled]="form().invalid">
                      Se Connecter
                      <i class="bx bx-right-arrow-alt ms-1"></i>
                    </button>
                  </div>

                  @if (errorMessage()) {
                    <div class="mt-3 alert alert-danger">
                      {{ errorMessage() }}
                    </div>
                  }
                </form>

                <div class="mt-4 text-center">
                  <button (click)="openModal(content)" class="text-muted btn">Mot de passe oublié?</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- end col -->
  </div>
  <!-- end row -->
</div>
<!-- end container-fluid -->
<ng-template #content role="document" let-modal>
  <div class="modal-header">
    <h5 class="modal-title" id="myModalLabel">Chanel confirmation</h5>
    <button
      type="button"
      class="btn-close"
      data-bs-dismiss="modal"
      aria-label="Close"
      (click)="modalRef?.hide()"
    ></button>
  </div>
  <div class="modal-body">
    <p class="text-muted phone-info">
      Vous avez oublié votre mot de passe ? Contactez votre administrateur
      >.
    </p>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-primary waves-effect waves-light" (click)="modalRef?.hide()"> Fermer </button>
  </div>
</ng-template>

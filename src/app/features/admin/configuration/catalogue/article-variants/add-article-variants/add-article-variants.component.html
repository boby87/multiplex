<app-page-title [title]="title()" [breadcrumbItems]="breadCrumbItems"></app-page-title>

<div class="form-container">
  <app-tabs (activeTabClick)="changeTab($event)" [activeTab]="activeTab()" [tabs]="tabs"></app-tabs>

  @for (tab of tabs; track tab.id) {
    <ng-container>
      @if (activeTab() === tab.id && activeTab() !== 'pricing') {
        <form [formGroup]="tab.form()" (ngSubmit)="onSubmit()" class="form-content">
          <div class="tab-pane">
            <app-dynamic-form-arry
              [fields]="tab.fields()"
              [form]="tab.form()"
            ></app-dynamic-form-arry>
          </div>
          <div class="form-actions border-top pt-3">
            <button type="reset" (click)="cancelAction()" class="btn btn-outline">
              {{ 'buttons.cancel' | translate }}
            </button>
            <button type="submit" class="btn btn-primary" [disabled]="tab.form().invalid && tab.form().dirty ">
              {{ 'buttons.save' | translate }}
            </button>
          </div>
        </form>
      } @else if (activeTab() === tab.id && activeTab() === 'pricing') {
        <app-prices [productVariant]="productVariant()" [priceListResponse]="pricing()"></app-prices>
      }
    </ng-container>
  }
</div>

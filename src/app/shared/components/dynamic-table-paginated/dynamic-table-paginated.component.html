<!-- Table -->
<div class="table-responsive">
  <table class="table align-middle dt-responsive nowrap w-100 table-check" id="customerList-table">
    @if (columns().length > 0) {
      <thead>
        <tr>
          @if (withCheckBox()) {
            <th>
              <input type="checkbox" [checked]="areAllSelected()" (change)="toggleAll()" />
            </th>
          }

          @for (col of columns(); track col) {
            <th (click)="sortBy(col)" style="cursor: pointer">
              {{ col | translate }}
              @if (sortColumn === col) {
                <span>
                  <i
                    [class]="sortDirection === 'asc' ? 'mdi mdi-arrow-up' : 'mdi mdi-arrow-down'"
                  ></i
                ></span>
              }
            </th>
          }
          <th>Action</th>
        </tr>
      </thead>
    }

    <tbody>
      @for (item of filteredData(); track item) {
        <tr>
          @if (withCheckBox()) {
            <td>
              <input type="checkbox" [(ngModel)]="item.selected" />
            </td>
          }

          @for (col of columns(); track col) {
            <td class="px-4 py-3">
              @switch (true) {
                @case (isImage(item[col])) {
                  <img
                    [ngSrc]="item[col]"
                    width="32"
                    height="32"
                    priority
                    class="rounded-circle avatar-xs"
                    alt="img"
                  />
                }
                @case (isArray(item[col])) {
                  <div class="avatar-group">
                    @for (img of item[col]; track img) {
                      <img
                        [ngSrc]="img"
                        width="32"
                        height="32"
                        priority
                        class="rounded-circle avatar-xs me-1"
                        alt="user"
                      />
                    }
                  </div>
                }
                @default {
                  <span [class]="getStatusClass(item[col])">{{ item[col] || '-' }}</span>
                }
              }
            </td>
          }
          <td>
            <ul class="list-unstyled hstack gap-1 mb-0">
              @for (action of actions(); track action.label) {
                <li
                  data-bs-toggle="tooltip"
                  data-bs-placement="top"
                  [title]="action.label | translate"
                >
                  <button (click)="action.doAction(item)" class="btn btn-sm btn-outline-light">
                    <i [class]="action.icon + ' me-1'"></i>
                  </button>
                </li>
              }
            </ul>
          </td>
        </tr>
      }
    </tbody>
  </table>
</div>

<!-- Pagination -->
<div class="d-flex justify-content-end mt-3">
  <ul class="pagination pagination-rounded">
    <li class="page-item" [class.disabled]="currentPage === 1">
      <button class="page-link" (click)="changePage(currentPage - 1)">
        <i class="bx bx-left-arrow-alt"></i>
      </button>
    </li>

    @for (page of visiblePages; track page) {
      <li class="page-item" [class.active]="page === currentPage">
        <button class="page-link" (click)="changePage(page)">{{ page }}</button>
      </li>
    }

    <li class="page-item" [class.disabled]="currentPage === totalPages">
      <button class="page-link" (click)="changePage(currentPage + 1)">
        <i class="bx bx-right-arrow-alt"></i>
      </button>
    </li>
  </ul>
</div>
